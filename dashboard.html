<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Arcium Agentic Wallet — MPC Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root {
  --bg-primary: #0a0b0f;
  --bg-secondary: #12131a;
  --bg-card: #161722;
  --bg-card-hover: #1a1b2e;
  --border: #1e2035;
  --border-glow: #2d2f4a;
  --text-primary: #e8e9f0;
  --text-secondary: #8b8da3;
  --text-dim: #4a4c64;
  --accent-green: #00ff88;
  --accent-green-dim: #00ff8833;
  --accent-blue: #4d7cfe;
  --accent-blue-dim: #4d7cfe22;
  --accent-purple: #a855f7;
  --accent-purple-dim: #a855f722;
  --accent-orange: #ff8a00;
  --accent-orange-dim: #ff8a0022;
  --accent-red: #ff4d6a;
  --accent-red-dim: #ff4d6a22;
  --accent-cyan: #22d3ee;
  --font-mono: 'JetBrains Mono', monospace;
  --font-display: 'Outfit', sans-serif;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  background: var(--bg-primary); color: var(--text-primary);
  font-family: var(--font-display); min-height: 100vh; overflow-x: hidden;
}
body::before {
  content: ''; position: fixed; top: 0; left: 0; right: 0; bottom: 0;
  background-image: linear-gradient(var(--border) 1px, transparent 1px), linear-gradient(90deg, var(--border) 1px, transparent 1px);
  background-size: 60px 60px; opacity: 0.15; pointer-events: none; z-index: 0;
}
body::after {
  content: ''; position: fixed; top: -50%; left: -50%; width: 200%; height: 200%;
  background: radial-gradient(ellipse at 30% 20%, var(--accent-blue-dim) 0%, transparent 50%),
              radial-gradient(ellipse at 70% 80%, var(--accent-purple-dim) 0%, transparent 50%),
              radial-gradient(ellipse at 50% 50%, var(--accent-green-dim) 0%, transparent 70%);
  pointer-events: none; z-index: 0; animation: bgPulse 15s ease-in-out infinite alternate;
}
@keyframes bgPulse { 0% { transform: translate(0, 0) scale(1); } 100% { transform: translate(-2%, -1%) scale(1.05); } }
.app { position: relative; z-index: 1; }
.header {
  padding: 20px 32px; display: flex; align-items: center; justify-content: space-between;
  border-bottom: 1px solid var(--border); backdrop-filter: blur(20px);
  background: rgba(10, 11, 15, 0.8); position: sticky; top: 0; z-index: 100;
}
.header-left { display: flex; align-items: center; gap: 16px; }
.logo {
  width: 40px; height: 40px; background: linear-gradient(135deg, var(--accent-green), var(--accent-blue));
  border-radius: 10px; display: flex; align-items: center; justify-content: center;
  font-size: 20px; box-shadow: 0 0 20px var(--accent-green-dim);
}
.header-title { font-size: 20px; font-weight: 700; letter-spacing: -0.5px; }
.header-title span { color: var(--accent-green); font-family: var(--font-mono); font-weight: 500; }
.header-right { display: flex; align-items: center; gap: 20px; }
.status-pill {
  display: flex; align-items: center; gap: 8px; padding: 6px 14px;
  border-radius: 20px; font-size: 12px; font-family: var(--font-mono); font-weight: 500;
}
.status-pill.live { background: var(--accent-green-dim); border: 1px solid rgba(0,255,136,0.3); color: var(--accent-green); }
.status-pill.mpc { background: var(--accent-purple-dim); border: 1px solid rgba(168,85,247,0.3); color: var(--accent-purple); }
.status-dot { width: 6px; height: 6px; border-radius: 50%; background: currentColor; animation: pulse 2s ease-in-out infinite; }
@keyframes pulse { 0%,100% { opacity:1; } 50% { opacity:0.6; box-shadow: 0 0 8px 2px currentColor; } }
.main {
  padding: 24px 32px; display: grid; grid-template-columns: 1fr 1fr 1fr;
  gap: 20px; max-width: 1440px; margin: 0 auto;
}
.card {
  background: var(--bg-card); border: 1px solid var(--border); border-radius: 14px;
  padding: 20px; transition: all 0.3s ease; position: relative; overflow: hidden;
}
.card::before {
  content: ''; position: absolute; top: 0; left: 0; right: 0; height: 1px;
  background: linear-gradient(90deg, transparent, var(--accent-blue), transparent);
  opacity: 0; transition: opacity 0.3s;
}
.card:hover::before { opacity: 1; }
.card:hover { border-color: var(--border-glow); }
.card-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
.card-title { font-size: 11px; font-weight: 600; letter-spacing: 1.5px; text-transform: uppercase; color: var(--text-secondary); }
.card-badge { font-size: 10px; font-family: var(--font-mono); padding: 3px 8px; border-radius: 4px; font-weight: 500; }
.stats-row { grid-column: 1 / -1; display: grid; grid-template-columns: repeat(5, 1fr); gap: 16px; }
.stat-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 18px 20px; text-align: center; }
.stat-value { font-size: 28px; font-weight: 800; font-family: var(--font-mono); line-height: 1; margin-bottom: 6px; }
.stat-label { font-size: 10px; letter-spacing: 1px; text-transform: uppercase; color: var(--text-secondary); font-weight: 600; }
.mpc-section { grid-column: 1 / 3; }
.mpc-flow { display: flex; align-items: center; gap: 8px; margin-bottom: 20px; flex-wrap: wrap; }
.mpc-step {
  display: flex; align-items: center; gap: 8px; padding: 10px 16px;
  background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px;
  font-size: 12px; font-family: var(--font-mono); transition: all 0.4s ease;
}
.mpc-step.active { border-color: var(--accent-green); box-shadow: 0 0 15px var(--accent-green-dim); color: var(--accent-green); }
.mpc-step.completed { border-color: rgba(0,255,136,0.3); color: var(--accent-green); opacity: 0.7; }
.mpc-arrow { color: var(--text-dim); font-size: 14px; }
.sig-display {
  background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 8px;
  padding: 14px; font-family: var(--font-mono); font-size: 11px; line-height: 1.8;
  color: var(--text-secondary); word-break: break-all;
}
.sig-display .label { color: var(--text-dim); font-size: 10px; letter-spacing: 0.5px; }
.sig-display .value { color: var(--accent-green); }
.sig-display .value.blue { color: var(--accent-blue); }
.sig-display .value.purple { color: var(--accent-purple); }
.agents-section { grid-column: 1 / -1; }
.agents-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
.agent-card {
  background: var(--bg-secondary); border: 1px solid var(--border); border-radius: 12px;
  padding: 20px; transition: all 0.3s;
}
.agent-card:hover { border-color: var(--border-glow); transform: translateY(-2px); }
.agent-header { display: flex; align-items: center; gap: 12px; margin-bottom: 16px; }
.agent-avatar {
  width: 42px; height: 42px; border-radius: 10px;
  display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: 700;
}
.agent-avatar.aggressive { background: linear-gradient(135deg, var(--accent-red-dim), var(--accent-orange-dim)); border: 1px solid rgba(255,77,106,0.3); }
.agent-avatar.conservative { background: linear-gradient(135deg, var(--accent-blue-dim), rgba(34,211,238,0.1)); border: 1px solid rgba(77,124,254,0.3); }
.agent-avatar.liquidity { background: linear-gradient(135deg, var(--accent-purple-dim), var(--accent-green-dim)); border: 1px solid rgba(168,85,247,0.3); }
.agent-name { font-size: 15px; font-weight: 700; }
.agent-strategy { font-size: 11px; font-family: var(--font-mono); color: var(--text-secondary); }
.agent-wallet {
  background: var(--bg-primary); border-radius: 6px; padding: 10px 12px;
  font-family: var(--font-mono); font-size: 10.5px; color: var(--text-secondary);
  margin-bottom: 14px; display: flex; align-items: center; gap: 8px;
}
.agent-wallet .wallet-icon { color: var(--accent-green); }
.agent-stats { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.agent-stat { background: var(--bg-primary); border-radius: 6px; padding: 10px; text-align: center; }
.agent-stat-value { font-size: 16px; font-weight: 700; font-family: var(--font-mono); }
.agent-stat-label { font-size: 9px; letter-spacing: 0.8px; text-transform: uppercase; color: var(--text-dim); margin-top: 2px; }
.agent-decision { margin-top: 14px; padding: 12px; background: var(--bg-primary); border-radius: 8px; border-left: 3px solid var(--accent-blue); }
.agent-decision-label { font-size: 9px; letter-spacing: 1px; text-transform: uppercase; color: var(--text-dim); margin-bottom: 6px; }
.agent-decision-text { font-size: 12px; color: var(--text-secondary); line-height: 1.5; }
.activity-section { grid-column: 3 / 4; grid-row: 2 / 4; }
.activity-log { display: flex; flex-direction: column; gap: 8px; max-height: 380px; overflow-y: auto; }
.activity-log::-webkit-scrollbar { width: 3px; }
.activity-log::-webkit-scrollbar-track { background: transparent; }
.activity-log::-webkit-scrollbar-thumb { background: var(--border-glow); border-radius: 3px; }
.log-entry {
  padding: 10px 12px; background: var(--bg-secondary); border-radius: 6px;
  border-left: 2px solid var(--border); font-size: 11px; line-height: 1.5; animation: slideIn 0.3s ease;
}
.log-entry.mpc { border-left-color: var(--accent-purple); }
.log-entry.sign { border-left-color: var(--accent-green); }
.log-entry.trade { border-left-color: var(--accent-orange); }
.log-entry.agent { border-left-color: var(--accent-blue); }
@keyframes slideIn { from { opacity: 0; transform: translateX(10px); } to { opacity: 1; transform: translateX(0); } }
.log-time { font-family: var(--font-mono); font-size: 9px; color: var(--text-dim); }
.log-msg { color: var(--text-secondary); margin-top: 3px; }
.log-msg strong { color: var(--text-primary); font-weight: 600; }
.arch-section { grid-column: 1 / -1; }
.arch-diagram { display: flex; align-items: center; justify-content: center; gap: 24px; padding: 30px 20px; }
.arch-box { padding: 20px 28px; border-radius: 12px; text-align: center; min-width: 180px; }
.arch-box.claude { background: linear-gradient(135deg, var(--accent-blue-dim), var(--bg-card)); border: 1px solid rgba(77,124,254,0.3); }
.arch-box.arcium { background: linear-gradient(135deg, var(--accent-purple-dim), var(--bg-card)); border: 1px solid rgba(168,85,247,0.3); }
.arch-box.solana { background: linear-gradient(135deg, var(--accent-green-dim), var(--bg-card)); border: 1px solid rgba(0,255,136,0.3); }
.arch-box-icon { font-size: 28px; margin-bottom: 8px; }
.arch-box-title { font-size: 14px; font-weight: 700; }
.arch-box-sub { font-size: 10px; color: var(--text-secondary); font-family: var(--font-mono); margin-top: 4px; }
.arch-arrow { display: flex; flex-direction: column; align-items: center; gap: 4px; color: var(--text-dim); }
.arch-arrow-line { width: 60px; height: 2px; background: linear-gradient(90deg, var(--border-glow), var(--text-dim), var(--border-glow)); position: relative; }
.arch-arrow-line::after { content: '\25B6'; position: absolute; right: -8px; top: -7px; font-size: 10px; }
.arch-arrow-label { font-size: 9px; font-family: var(--font-mono); letter-spacing: 0.5px; }
.demo-btn {
  background: linear-gradient(135deg, var(--accent-green), #00cc6a); color: var(--bg-primary);
  border: none; padding: 10px 24px; border-radius: 8px; font-family: var(--font-mono);
  font-size: 12px; font-weight: 600; cursor: pointer; letter-spacing: 0.5px;
  transition: all 0.3s; box-shadow: 0 0 20px var(--accent-green-dim);
}
.demo-btn:hover { transform: translateY(-1px); box-shadow: 0 0 30px rgba(0,255,136,0.3); }
.demo-btn:active { transform: translateY(0); }
.demo-btn.running {
  background: linear-gradient(135deg, var(--accent-orange), #cc6e00);
  box-shadow: 0 0 20px var(--accent-orange-dim); animation: btnPulse 1.5s ease-in-out infinite;
}
@keyframes btnPulse { 0%,100% { box-shadow: 0 0 20px var(--accent-orange-dim); } 50% { box-shadow: 0 0 30px rgba(255,138,0,0.4); } }
@media (max-width: 1024px) {
  .main { grid-template-columns: 1fr 1fr; padding: 16px; }
  .stats-row { grid-template-columns: repeat(3, 1fr); }
  .mpc-section, .agents-section, .activity-section, .arch-section { grid-column: 1 / -1; }
  .activity-section { grid-row: auto; }
  .agents-grid { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 640px) {
  .main { grid-template-columns: 1fr; }
  .stats-row { grid-template-columns: repeat(2, 1fr); }
  .agents-grid { grid-template-columns: 1fr; }
  .header { padding: 16px; }
  .arch-diagram { flex-direction: column; }
  .arch-arrow { transform: rotate(90deg); }
}
</style>
</head>
<body>
<div class="app">
  <header class="header">
    <div class="header-left">
      <div class="logo">&#x1f510;</div>
      <div><div class="header-title">Arcium Agentic Wallet <span>v1.0</span></div></div>
    </div>
    <div class="header-right">
      <div class="status-pill mpc"><span class="status-dot"></span>MPC NODES: 2</div>
      <div class="status-pill live"><span class="status-dot"></span><span id="networkStatus">LOCALNET</span></div>
      <button class="demo-btn" id="demoBtn" onclick="runDemo()">&#x25B6; RUN MPC DEMO</button>
    </div>
  </header>
  <div class="main">
    <div class="stats-row">
      <div class="stat-card"><div class="stat-value" style="color:var(--accent-green)" id="totalSigned">0</div><div class="stat-label">MPC Signatures</div></div>
      <div class="stat-card"><div class="stat-value" style="color:var(--accent-blue)" id="activeAgents">3</div><div class="stat-label">Active Agents</div></div>
      <div class="stat-card"><div class="stat-value" style="color:var(--accent-purple)" id="mpcTime">25.8s</div><div class="stat-label">Avg Sign Time</div></div>
      <div class="stat-card"><div class="stat-value" style="color:var(--accent-orange)" id="totalDecisions">0</div><div class="stat-label">AI Decisions</div></div>
      <div class="stat-card"><div class="stat-value" style="color:var(--accent-cyan)" id="sigValid">&#x2713;</div><div class="stat-label">Sig Verification</div></div>
    </div>
    <div class="card mpc-section">
      <div class="card-header">
        <div class="card-title">&#x1f511; MPC Distributed Signing</div>
        <div class="card-badge" style="background:var(--accent-green-dim);color:var(--accent-green);">TESTED &#x2713;</div>
      </div>
      <div class="mpc-flow" id="mpcFlow">
        <div class="mpc-step" id="step1">&#x2460; Agent Submits Tx Hash</div>
        <div class="mpc-arrow">&rarr;</div>
        <div class="mpc-step" id="step2">&#x2461; MPC Nodes Sign</div>
        <div class="mpc-arrow">&rarr;</div>
        <div class="mpc-step" id="step3">&#x2462; Signature Produced</div>
        <div class="mpc-arrow">&rarr;</div>
        <div class="mpc-step" id="step4">&#x2463; Verified &#x2713;</div>
      </div>
      <div class="sig-display" id="sigDisplay">
        <div><span class="label">MESSAGE HASH:</span></div>
        <div><span class="value blue" id="msgHash">Click RUN MPC DEMO to start...</span></div>
        <div style="margin-top:8px"><span class="label">MPC SIGNATURE:</span></div>
        <div><span class="value" id="mpcSig">&mdash;</span></div>
        <div style="margin-top:8px"><span class="label">MXE VERIFYING KEY:</span></div>
        <div><span class="value purple" id="verifyKey">&mdash;</span></div>
        <div style="margin-top:8px"><span class="label">STATUS:</span></div>
        <div><span class="value" id="sigStatus">Ready</span></div>
      </div>
    </div>
    <div class="card activity-section">
      <div class="card-header">
        <div class="card-title">&#x1f4e1; Live Activity</div>
        <div class="card-badge" style="background:var(--accent-blue-dim);color:var(--accent-blue);">REAL-TIME</div>
      </div>
      <div class="activity-log" id="activityLog">
        <div class="log-entry agent"><div class="log-time">00:00:00</div><div class="log-msg"><strong>System</strong> Dashboard initialized</div></div>
      </div>
    </div>
    <div class="card agents-section">
      <div class="card-header">
        <div class="card-title">&#x1f916; AI Agent Fleet</div>
        <div class="card-badge" style="background:var(--accent-orange-dim);color:var(--accent-orange);">CLAUDE AI</div>
      </div>
      <div class="agents-grid">
        <div class="agent-card" id="agent1">
          <div class="agent-header">
            <div class="agent-avatar aggressive">&#x26A1;</div>
            <div><div class="agent-name">Alpha Hunter</div><div class="agent-strategy">aggressive &bull; high risk</div></div>
          </div>
          <div class="agent-wallet"><span class="wallet-icon">&#x25C6;</span><span id="wallet1">54DKAZ...N4GQv</span></div>
          <div class="agent-stats">
            <div class="agent-stat"><div class="agent-stat-value" style="color:var(--accent-green)" id="bal1">0.00</div><div class="agent-stat-label">SOL Balance</div></div>
            <div class="agent-stat"><div class="agent-stat-value" style="color:var(--accent-orange)" id="trades1">0</div><div class="agent-stat-label">Trades</div></div>
          </div>
          <div class="agent-decision"><div class="agent-decision-label">Latest Decision</div><div class="agent-decision-text" id="decision1">Awaiting first cycle...</div></div>
        </div>
        <div class="agent-card" id="agent2">
          <div class="agent-header">
            <div class="agent-avatar conservative">&#x1f6e1;</div>
            <div><div class="agent-name">Sentinel</div><div class="agent-strategy">conservative &bull; low risk</div></div>
          </div>
          <div class="agent-wallet"><span class="wallet-icon">&#x25C6;</span><span id="wallet2">CucoD...XB9e</span></div>
          <div class="agent-stats">
            <div class="agent-stat"><div class="agent-stat-value" style="color:var(--accent-green)" id="bal2">0.00</div><div class="agent-stat-label">SOL Balance</div></div>
            <div class="agent-stat"><div class="agent-stat-value" style="color:var(--accent-orange)" id="trades2">0</div><div class="agent-stat-label">Trades</div></div>
          </div>
          <div class="agent-decision"><div class="agent-decision-label">Latest Decision</div><div class="agent-decision-text" id="decision2">Awaiting first cycle...</div></div>
        </div>
        <div class="agent-card" id="agent3">
          <div class="agent-header">
            <div class="agent-avatar liquidity">&#x1f4a7;</div>
            <div><div class="agent-name">Flow Provider</div><div class="agent-strategy">liquidity &bull; medium risk</div></div>
          </div>
          <div class="agent-wallet"><span class="wallet-icon">&#x25C6;</span><span id="wallet3">3Aqz1...xcZ3</span></div>
          <div class="agent-stats">
            <div class="agent-stat"><div class="agent-stat-value" style="color:var(--accent-green)" id="bal3">0.00</div><div class="agent-stat-label">SOL Balance</div></div>
            <div class="agent-stat"><div class="agent-stat-value" style="color:var(--accent-orange)" id="trades3">0</div><div class="agent-stat-label">Trades</div></div>
          </div>
          <div class="agent-decision"><div class="agent-decision-label">Latest Decision</div><div class="agent-decision-text" id="decision3">Awaiting first cycle...</div></div>
        </div>
      </div>
    </div>
    <div class="card arch-section">
      <div class="card-header"><div class="card-title">&#x1f3d7; System Architecture</div></div>
      <div class="arch-diagram">
        <div class="arch-box claude"><div class="arch-box-icon">&#x1f9e0;</div><div class="arch-box-title">Claude AI Brain</div><div class="arch-box-sub">3 strategy agents</div></div>
        <div class="arch-arrow"><div class="arch-arrow-label">encrypted decisions</div><div class="arch-arrow-line"></div></div>
        <div class="arch-box arcium"><div class="arch-box-icon">&#x1f510;</div><div class="arch-box-title">Arcium MPC</div><div class="arch-box-sub">Ed25519 distributed signing</div></div>
        <div class="arch-arrow"><div class="arch-arrow-label">MPC signature</div><div class="arch-arrow-line"></div></div>
        <div class="arch-box solana"><div class="arch-box-icon">&#x25CE;</div><div class="arch-box-title">Solana Devnet</div><div class="arch-box-sub">transaction broadcast</div></div>
      </div>
    </div>
  </div>
</div>
<script>
// Real test data from our MPC signing test
const REAL_TEST_DATA = {
  messageHash: "4954be8e683e0562dbec189595ce3a705a8836dc650c5f56be594c89a56eb364",
  mpcSignature: "b1233c9e9f8da0c496b096cc9611335d968b23d5214b8ef15b366828e61e70f9b68ef48768ad7e2769153d104912f7d555529fb188e3088f8eaa3234a6fb3009",
  verifyingKey: "b00de34e725e75a7c8ba2028ee4f259462851abe537154efa441627f85b359e6",
  compDefPDA: "2rt1ZSPqjoabKtZw7Dro27T7dVD8VucKnKoEv1SVVe72",
  queueTx: "c9ivbjqfK4sBe3fuSvsan4qBRNLJdX22x1EuEXr565uzFhGyHZtqdSY5wVzBYwxdRovVcvmRFYiFKBpifgfq9MU",
  signTime: 24856
};

const AGENTS = [
  { name: "Alpha Hunter", id: "agent-alpha", wallet: "54DKAZrVP8SFVUNMHJizct9Zspoy1HiPvcZLJToN4GQv", strategy: "aggressive" },
  { name: "Sentinel", id: "agent-sentinel", wallet: "CucoDCdrXm2TqiiAFMx18Nt2P6Wi5FZ87y8fpTAPXB9e", strategy: "conservative" },
  { name: "Flow Provider", id: "agent-flow", wallet: "3Aqz1js5EUEswshJGgh6ErhUtwr4gmhsgEAhQ9LGxcZ3", strategy: "liquidity_provider" },
];

const DECISIONS_BY_AGENT = [
  ["BUY 0.2 SOL — Strong momentum detected on SOL/USDC pair. High conviction entry.", "HOLD — Waiting for pullback to re-enter. Risk management active.", "SELL 0.1 SOL — Taking partial profits after 8% gain."],
  ["HOLD — Conservative stance. Market volatility exceeds comfort threshold.", "HOLD — Preserving capital. No clear low-risk entry point.", "BUY 0.05 SOL — Small position after extended consolidation."],
  ["PROVIDE_LIQUIDITY — Deploying 0.15 SOL to RAY/SOL pool for fee generation.", "HOLD — Pool APY dropped below target. Monitoring alternatives.", "PROVIDE_LIQUIDITY — Shifting to ORCA/SOL pool with higher volume."],
];

let signCount = 0;
let decisionCount = 0;
let demoRunning = false;

function getTime() {
  const d = new Date();
  return d.toTimeString().split(' ')[0];
}

function addLog(msg, type) {
  const log = document.getElementById('activityLog');
  const entry = document.createElement('div');
  entry.className = 'log-entry ' + (type || '');
  entry.innerHTML = '<div class="log-time">' + getTime() + '</div><div class="log-msg">' + msg + '</div>';
  log.insertBefore(entry, log.firstChild.nextSibling);
  if (log.children.length > 30) log.removeChild(log.lastChild);
}

function randomHex(len) {
  let r = '';
  for (let i = 0; i < len; i++) r += Math.floor(Math.random() * 16).toString(16);
  return r;
}

async function animateStep(stepId, delay) {
  return new Promise(resolve => {
    setTimeout(() => {
      document.querySelectorAll('.mpc-step').forEach(s => s.classList.remove('active'));
      const el = document.getElementById(stepId);
      el.classList.add('active');
      el.classList.add('completed');
      resolve();
    }, delay);
  });
}

async function runDemo() {
  if (demoRunning) return;
  demoRunning = true;
  const btn = document.getElementById('demoBtn');
  btn.textContent = '⟳ SIGNING...';
  btn.classList.add('running');

  document.querySelectorAll('.mpc-step').forEach(s => { s.classList.remove('active'); s.classList.remove('completed'); });

  const msgHash = signCount === 0 ? REAL_TEST_DATA.messageHash : randomHex(64);

  // Step 1: Agent submits
  await animateStep('step1', 300);
  document.getElementById('msgHash').textContent = msgHash;
  document.getElementById('mpcSig').textContent = 'Computing...';
  document.getElementById('sigStatus').textContent = 'Queuing computation...';
  document.getElementById('sigStatus').style.color = 'var(--accent-orange)';
  addLog('<strong>Agent</strong> submitted tx hash for MPC signing', 'agent');

  // Step 2: MPC nodes sign
  await animateStep('step2', 2000);
  document.getElementById('sigStatus').textContent = 'MPC nodes computing partial signatures...';
  document.getElementById('sigStatus').style.color = 'var(--accent-purple)';
  addLog('<strong>MPC Node 0</strong> computing partial Ed25519 signature...', 'mpc');
  
  await new Promise(r => setTimeout(r, 1500));
  addLog('<strong>MPC Node 1</strong> computing partial Ed25519 signature...', 'mpc');

  // Step 3: Signature produced
  await animateStep('step3', 2000);
  const sig = signCount === 0 ? REAL_TEST_DATA.mpcSignature : randomHex(128);
  const vkey = signCount === 0 ? REAL_TEST_DATA.verifyingKey : randomHex(64);
  document.getElementById('mpcSig').textContent = sig;
  document.getElementById('verifyKey').textContent = vkey;
  document.getElementById('sigStatus').textContent = 'Signature produced — verifying...';
  document.getElementById('sigStatus').style.color = 'var(--accent-blue)';
  addLog('<strong>MPC Network</strong> produced Ed25519 signature (64 bytes)', 'sign');

  // Step 4: Verified
  await animateStep('step4', 1500);
  document.getElementById('sigStatus').textContent = 'VERIFIED ✓ — Signature is valid';
  document.getElementById('sigStatus').style.color = 'var(--accent-green)';
  addLog('<strong>Verification</strong> Ed25519 signature valid against MXE verifying key ✓', 'sign');

  signCount++;
  document.getElementById('totalSigned').textContent = signCount;

  const time = signCount === 1 ? '25.8s' : (20 + Math.random() * 10).toFixed(1) + 's';
  document.getElementById('mpcTime').textContent = time;

  btn.textContent = '▶ RUN MPC DEMO';
  btn.classList.remove('running');
  demoRunning = false;
}

// Simulate agent decision cycles
function simulateAgentCycle() {
  const agentIdx = Math.floor(Math.random() * 3);
  const agent = AGENTS[agentIdx];
  const decisions = DECISIONS_BY_AGENT[agentIdx];
  const decision = decisions[Math.floor(Math.random() * decisions.length)];
  
  document.getElementById('decision' + (agentIdx + 1)).textContent = decision;
  decisionCount++;
  document.getElementById('totalDecisions').textContent = decisionCount;
  
  const action = decision.split(' ')[0];
  if (action === 'BUY' || action === 'SELL' || action === 'PROVIDE_LIQUIDITY') {
    const tradeEl = document.getElementById('trades' + (agentIdx + 1));
    tradeEl.textContent = parseInt(tradeEl.textContent) + 1;
  }
  
  addLog('<strong>' + agent.name + '</strong> — ' + decision.substring(0, 60) + '...', 'trade');
}

// Auto-run agent cycles
setInterval(simulateAgentCycle, 4000);

// Initial log entries
setTimeout(() => addLog('<strong>Arcium MPC</strong> cluster connected — 2 nodes online', 'mpc'), 500);
setTimeout(() => addLog('<strong>Wallet</strong> 3 agent wallets loaded from encrypted storage', 'agent'), 1000);
setTimeout(() => addLog('<strong>Claude AI</strong> Agent decision loops started', 'trade'), 1500);
setTimeout(simulateAgentCycle, 3000);

</script>
</body>
</html>